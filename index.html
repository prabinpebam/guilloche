<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guilloché Pattern Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      display: flex;
      overflow: hidden;
    }
    #controls {
      width: 300px;
      height: 100vh;
      overflow-y: auto;
      padding: 20px;
      background: #f8f9fa;
      border-left: 1px solid #ddd;
    }
    #canvas-container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    canvas {
      max-width: 100%;
      max-height: 100%;
    }
    .control-group {
      margin-bottom: 15px;
    }
    .section-header {
      margin-top: 20px;
      font-weight: bold;
      border-top: 1px solid #ddd;
      padding-top: 10px;
    }
  </style>
</head>
<body>
  <div id="canvas-container">
    <canvas id="guillocheCanvas"></canvas>
  </div>
  <div id="controls">
    <h5>Core Parameters</h5>
    <div class="control-group">
      <label for="R" class="form-label">Fixed Circle Radius (R):</label>
      <input type="range" class="form-range" id="R" min="50" max="300" value="150">
      <span id="R_val">150</span>
    </div>
    <div class="control-group">
      <label for="r" class="form-label">Rolling Circle Radius (r):</label>
      <input type="range" class="form-range" id="r" min="10" max="150" value="50">
      <span id="r_val">50</span>
    </div>
    <div class="control-group">
      <label for="d" class="form-label">Pen Distance (d):</label>
      <input type="range" class="form-range" id="d" min="0" max="150" value="50">
      <span id="d_val">50</span>
    </div>
    <div class="control-group">
      <label for="num_curves" class="form-label">Number of Layered Curves:</label>
      <input type="range" class="form-range" id="num_curves" min="1" max="10" value="1">
      <span id="num_curves_val">1</span>
    </div>
    <div class="control-group">
      <label for="offset" class="form-label">Offset for Layering (°):</label>
      <input type="range" class="form-range" id="offset" min="0" max="360" value="0">
      <span id="offset_val">0</span>
    </div>
    <div class="control-group">
      <label for="t_range" class="form-label">t Range (rotations):</label>
      <!-- A number input with no max cap -->
      <input type="number" class="form-control" id="t_range" value="10" step="1">
      <span id="t_range_val">10</span>
      <div class="form-text">
        Calculated perfect closure: <span id="t_closure">?</span> rotations
      </div>
    </div>
    <div class="control-group">
      <label for="t_step" class="form-label">t Step:</label>
      <input type="range" class="form-range" id="t_step" min="0.001" max="0.1" step="0.001" value="0.005">
      <span id="t_step_val">0.005</span>
    </div>
    <div class="control-group">
      <label for="rotation" class="form-label">Global Rotation (°):</label>
      <input type="range" class="form-range" id="rotation" min="0" max="360" value="0">
      <span id="rotation_val">0</span>
    </div>
    <div class="control-group">
      <label for="thickness" class="form-label">Line Thickness:</label>
      <input type="range" class="form-range" id="thickness" min="0.5" max="10" step="0.1" value="1">
      <span id="thickness_val">1</span>
    </div>
    <div class="control-group">
      <label for="color1" class="form-label">Color 1:</label>
      <input type="color" id="color1" value="#FFB6C1">
    </div>
    <div class="control-group">
      <label for="color2" class="form-label">Color 2:</label>
      <input type="color" id="color2" value="#ADD8E6">
    </div>
    <div class="control-group">
      <label for="color3" class="form-label">Color 3:</label>
      <input type="color" id="color3" value="#FFDAB9">
    </div>
    <div class="control-group">
      <label for="color4" class="form-label">Color 4:</label>
      <input type="color" id="color4" value="#E6E6FA">
    </div>
    <div class="control-group">
      <label for="gradientLoops" class="form-label">Gradient Loops:</label>
      <input type="number" class="form-control" id="gradientLoops" value="3" step="1">
      <span id="gradientLoops_val">3</span>
      <div class="form-text">
        Number of times the gradient repeats along the line.
      </div>
    </div>
    
    <div class="section-header">Secondary Modifiers (Polar Displacement)</div>
    <div class="control-group">
      <label for="dispAmp" class="form-label">Displacement Amplitude:</label>
      <input type="number" class="form-control" id="dispAmp" value="20" step="1" min="0" max="200">
      <span id="dispAmp_val">20</span>
    </div>
    <div class="control-group">
      <label for="dispFreq" class="form-label">Displacement Frequency:</label>
      <input type="number" class="form-control" id="dispFreq" value="5" step="1" min="1" max="20">
      <span id="dispFreq_val">5</span>
    </div>
    <div class="control-group">
      <label for="dispPhase" class="form-label">Displacement Phase (°):</label>
      <input type="number" class="form-control" id="dispPhase" value="0" step="1" min="0" max="360">
      <span id="dispPhase_val">0</span>
    </div>
    <div class="control-group">
      <label for="dispExp" class="form-label">Displacement Exponent:</label>
      <input type="number" class="form-control" id="dispExp" value="1" step="0.1" min="0.1" max="5">
      <span id="dispExp_val">1</span>
    </div>
    <div class="control-group">
      <button id="exportSVG" class="btn btn-primary">Export SVG</button>
    </div>
  </div>
  <script src="guilloche.js"></script>
</body>
</html>
